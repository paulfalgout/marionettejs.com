<html>
  <head>
    <title>marionette.compositeview - Marionette.js Docs</title>
    <link rel="stylesheet" href="../../styles/docs.css">
  </head>
  <body>
    <div class="docs">
      <div class="docs__sidebar">
        <select id="version-dropdown">
          
            
              <option value="v2.3.0">v2.3.0</option>
            
          
            
              <option value="v2.3.0-pre">v2.3.0-pre</option>
            
          
            
              <option value="v2.2.2">v2.2.2</option>
            
          
            
              <option value="v2.2.1">v2.2.1</option>
            
          
            
              <option value="v2.2.0">v2.2.0</option>
            
          
            
              <option value="v2.2.0-pre.2">v2.2.0-pre.2</option>
            
          
            
              <option value="v2.2.0-pre">v2.2.0-pre</option>
            
          
            
              <option value="v2.1.0">v2.1.0</option>
            
          
            
              <option value="v2.1.0-pre">v2.1.0-pre</option>
            
          
            
              <option value="v2.0.3">v2.0.3</option>
            
          
            
              <option value="v2.0.2">v2.0.2</option>
            
          
            
              <option value="v2.0.1">v2.0.1</option>
            
          
            
              <option value="v2.0.0">v2.0.0</option>
            
          
            
              <option value="v2.0.0-pre.2">v2.0.0-pre.2</option>
            
          
            
              <option value="v2.0.0-pre.1">v2.0.0-pre.1</option>
            
          
            
              <option value="v1.8.8">v1.8.8</option>
            
          
            
              <option value="v1.8.7">v1.8.7</option>
            
          
            
              <option value="v1.8.6">v1.8.6</option>
            
          
            
              <option value="v1.8.5">v1.8.5</option>
            
          
            
              <option value="v1.8.4">v1.8.4</option>
            
          
            
              <option value="v1.8.3">v1.8.3</option>
            
          
            
              <option value="v1.8.2">v1.8.2</option>
            
          
            
              <option value="v1.8.1">v1.8.1</option>
            
          
            
              <option value="v1.8.0">v1.8.0</option>
            
          
            
              <option value="v1.7.4">v1.7.4</option>
            
          
            
              <option value="v1.7.3">v1.7.3</option>
            
          
            
              <option value="v1.7.2">v1.7.2</option>
            
          
            
              <option value="v1.7.1">v1.7.1</option>
            
          
            
              <option value="v1.7">v1.7</option>
            
          
            
              <option value="v1.6.4">v1.6.4</option>
            
          
            
              <option value="v1.6.3">v1.6.3</option>
            
          
            
              <option value="v1.6.2">v1.6.2</option>
            
          
            
              <option value="v1.6.1">v1.6.1</option>
            
          
            
              <option value="v1.6.0">v1.6.0</option>
            
          
            
              <option value="v1.5.1">v1.5.1</option>
            
          
            
              <option value="v1.5.0">v1.5.0</option>
            
          
            
              <option value="v1.4.1">v1.4.1</option>
            
          
            
              <option value="v1.4.0">v1.4.0</option>
            
          
            
              <option value="v1.4.0beta">v1.4.0beta</option>
            
          
            
              <option value="v1.3.0">v1.3.0</option>
            
          
            
              <option value="v1.2.3">v1.2.3</option>
            
          
            
              <option value="v1.2.2">v1.2.2</option>
            
          
            
              <option value="v1.2.1">v1.2.1</option>
            
          
            
              <option value="v1.2.0">v1.2.0</option>
            
          
            
              <option value="v1.1.0">v1.1.0</option>
            
          
            
              <option value="v1.0.4">v1.0.4</option>
            
          
            
              <option value="v1.0.3">v1.0.3</option>
            
          
            
              <option value="v1.0.2">v1.0.2</option>
            
          
            
              <option value="v1.0.1">v1.0.1</option>
            
          
            
              <option value="v1.0.0">v1.0.0</option>
            
          
            
              <option value="v1.0.0-rc6">v1.0.0-rc6</option>
            
          
            
              <option value="v1.0.0-rc5">v1.0.0-rc5</option>
            
          
            
              <option value="v1.0.0-rc4">v1.0.0-rc4</option>
            
          
            
              <option value="v1.0.0-rc3">v1.0.0-rc3</option>
            
          
            
              <option value="v1.0.0-rc2" selected="selected">v1.0.0-rc2</option>
            
          
            
              <option value="v1.0.0-rc1">v1.0.0-rc1</option>
            
          
            
              <option value="v1.0.0-beta6">v1.0.0-beta6</option>
            
          
            
              <option value="v1.0.0-beta5">v1.0.0-beta5</option>
            
          
            
              <option value="v1.0.0-beta4">v1.0.0-beta4</option>
            
          
            
              <option value="v1.0.0-beta3">v1.0.0-beta3</option>
            
          
            
              <option value="v1.0.0-beta2">v1.0.0-beta2</option>
            
          
            
              <option value="v1.0.0-beta1">v1.0.0-beta1</option>
            
          
            
              <option value="v0.10.2">v0.10.2</option>
            
          
            
              <option value="v0.10.1">v0.10.1</option>
            
          
            
              <option value="v0.10.0">v0.10.0</option>
            
          
            
              <option value="v0.9.13">v0.9.13</option>
            
          
            
              <option value="v0.9.12">v0.9.12</option>
            
          
            
              <option value="v0.9.11">v0.9.11</option>
            
          
            
              <option value="v0.9.10">v0.9.10</option>
            
          
            
              <option value="v0.9.9">v0.9.9</option>
            
          
            
              <option value="v0.9.8">v0.9.8</option>
            
          
            
              <option value="v0.9.7">v0.9.7</option>
            
          
            
              <option value="v0.9.6">v0.9.6</option>
            
          
            
              <option value="v0.9.5">v0.9.5</option>
            
          
            
              <option value="v0.9.4">v0.9.4</option>
            
          
            
              <option value="v0.9.3">v0.9.3</option>
            
          
            
              <option value="v0.9.2">v0.9.2</option>
            
          
            
              <option value="v0.9.1">v0.9.1</option>
            
          
            
              <option value="v0.9.0">v0.9.0</option>
            
          
            
              <option value="v0.8.4">v0.8.4</option>
            
          
            
              <option value="v0.8.3">v0.8.3</option>
            
          
            
              <option value="v0.8.2">v0.8.2</option>
            
          
            
              <option value="v0.8.1">v0.8.1</option>
            
          
            
              <option value="v0.8.0">v0.8.0</option>
            
          
            
              <option value="v0.7.6">v0.7.6</option>
            
          
            
              <option value="v0.7.5">v0.7.5</option>
            
          
            
              <option value="v0.7.4">v0.7.4</option>
            
          
            
              <option value="v0.7.3">v0.7.3</option>
            
          
            
              <option value="v0.7.2">v0.7.2</option>
            
          
            
              <option value="v0.7.1">v0.7.1</option>
            
          
            
              <option value="v0.7.0">v0.7.0</option>
            
          
            
              <option value="v0.6.3">v0.6.3</option>
            
          
            
              <option value="v0.6.2">v0.6.2</option>
            
          
            
              <option value="v0.6.1">v0.6.1</option>
            
          
            
              <option value="v0.6.0">v0.6.0</option>
            
          
            
              <option value="v0.5.2">v0.5.2</option>
            
          
            
              <option value="v0.5.1">v0.5.1</option>
            
          
            
              <option value="v0.5.0">v0.5.0</option>
            
          
            
              <option value="v0.4.8">v0.4.8</option>
            
          
            
              <option value="v0.4.7">v0.4.7</option>
            
          
            
              <option value="v0.4.6">v0.4.6</option>
            
          
            
              <option value="v0.4.5">v0.4.5</option>
            
          
            
              <option value="v0.4.4">v0.4.4</option>
            
          
            
              <option value="v0.4.3">v0.4.3</option>
            
          
            
              <option value="v0.4.2">v0.4.2</option>
            
          
            
              <option value="v0.4.1">v0.4.1</option>
            
          
            
              <option value="v0.4.1a">v0.4.1a</option>
            
          
            
              <option value="v0.4.0">v0.4.0</option>
            
          
            
              <option value="v0.3.1">v0.3.1</option>
            
          
            
              <option value="v0.3.0">v0.3.0</option>
            
          
            
              <option value="v0.2.6">v0.2.6</option>
            
          
            
              <option value="v0.2.5">v0.2.5</option>
            
          
            
              <option value="v0.2.4">v0.2.4</option>
            
          
            
              <option value="v0.2.3">v0.2.3</option>
            
          
            
              <option value="v0.2.2">v0.2.2</option>
            
          
            
              <option value="v0.2.1">v0.2.1</option>
            
          
            
              <option value="v0.2.0">v0.2.0</option>
            
          
            
              <option value="v0.1.0">v0.1.0</option>
            
          
        </select>
        <nav>
          
            <a href="marionette.application.html">marionette.application</a>
          
            <a href="marionette.application.module.html">marionette.application.module</a>
          
            <a href="marionette.approuter.html">marionette.approuter</a>
          
            <a href="marionette.callbacks.html">marionette.callbacks</a>
          
            <a href="marionette.collectionview.html">marionette.collectionview</a>
          
            <a href="marionette.commands.html">marionette.commands</a>
          
            <a href="marionette.compositeview.html">marionette.compositeview</a>
          
            <a href="marionette.controller.html">marionette.controller</a>
          
            <a href="marionette.eventaggregator.html">marionette.eventaggregator</a>
          
            <a href="marionette.eventbinder.html">marionette.eventbinder</a>
          
            <a href="marionette.functions.html">marionette.functions</a>
          
            <a href="marionette.itemview.html">marionette.itemview</a>
          
            <a href="marionette.layout.html">marionette.layout</a>
          
            <a href="marionette.region.html">marionette.region</a>
          
            <a href="marionette.renderer.html">marionette.renderer</a>
          
            <a href="marionette.requestresponse.html">marionette.requestresponse</a>
          
            <a href="marionette.templatecache.html">marionette.templatecache</a>
          
            <a href="marionette.view.html">marionette.view</a>
          
        </nav>
      </div>
      <div class="docs__content">
        <h1>Marionette.CompositeView</h1>
<p>A <code>CompositeView</code> extends from <code>CollectionView</code> to be used as a<br />composite view for scenarios where it should represent both a<br />branch and leaf in a tree structure, or for scenarios where a<br />collection needs to be rendered within a wrapper template.</p><p>For example, if you&#39;re rendering a treeview control, you may<br />want to render a collection view with a model and template so<br />that it will show a parent item with children in the tree.</p><p>You can specify a <code>modelView</code> to use for the model. If you don&#39;t<br />specify one, it will default to the <code>Marionette.ItemView</code>.</p><pre><code class="lang-js">CompositeView = Backbone.Marionette.CompositeView.extend({
  template: <span class="hljs-string">"#leaf-branch-template"</span>
});

<span class="hljs-keyword">new</span> CompositeView({
  model: someModel,
  collection: someCollection
});
</code></pre>
<p>For more examples, see my blog post on<br /><a href="http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/">using the composite view</a></p><h2>Documentation Index</h2>
<ul>
<li><a href="#composite-model-template">Composite Model <code>template</code></a></li>
<li><a href="#compositeviews-itemviewcontainer">CompositeView&#39;s <code>itemViewContainer</code></a></li>
<li><a href="#compositeviews-appendhtml">CompositeView&#39;s <code>appendHtml</code></a></li>
<li><a href="#recursive-by-default">Recursive By Default</a></li>
<li><a href="#model-and-collection-rendering">Model And Collection Rendering</a></li>
<li><a href="#events-and-callbacks">Events And Callbacks</a></li>
<li><a href="#organizing-ui-elements">Organizing ui elements</a></li>
<li><a href="#modelevents-and-collectionevents">modelEvents and collectionEvents</a></li>
</ul>
<h2>Composite Model <code>template</code></h2>
<p>When a <code>CompositeView</code> is rendered, the <code>model</code> will be rendered<br />with the <code>template</code> that the view is configured with. You can<br />override the template by passing it in as a constructor option:</p><pre><code class="lang-js"><span class="hljs-keyword">new</span> MyComp({
  template: <span class="hljs-string">"#some-template"</span>
});
</code></pre>
<h2>CompositeView&#39;s <code>itemViewContainer</code></h2>
<p>By default the composite view uses the same <code>appendHtml</code> method that the<br />collection view provides. This means the view will call jQuery&#39;s <code>.append</code><br />to move the HTML contents from the item view instance in to the collection<br />view&#39;s <code>el</code>. </p><p>This is typically not very useful as a composite view will usually render<br />a container DOM element in which the item views should be placed.</p><p>For example, if you are building a table view, and want to append each<br />item from the collection in to the <code>&lt;tbody&gt;</code> of the table, you might<br />do this with a template:</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"row-template"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/html"</span>&gt;</span><span class="javascript">
  &lt;td&gt;<span class="xml"><span class="vbscript">&lt;%= someData %&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span><span class="vbscript">&lt;%= moreData %&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span><span class="vbscript">&lt;%= stuff %&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"table-template"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/html"</span>&gt;</span><span class="javascript">
  &lt;table&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">thead</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Some Column<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Another Column<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>Still More<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">thead</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- want to insert collection items, here --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">tbody</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">tbody</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">tfoot</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">td</span> <span class="hljs-attribute">colspan</span>=<span class="hljs-value">"3"</span>&gt;</span>some footer information<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tfoot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>
</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>To get your itemView instances to render within the <code>&lt;tbody&gt;</code> of this<br />table structure, specify an <code>itemViewContainer</code> in your composite view,<br />like this:</p><pre><code class="lang-js">RowView = Backbone.Marionette.ItemView.extend({
  tagName: <span class="hljs-string">"tr"</span>,
  template: <span class="hljs-string">"#row-template"</span>
});

TableView = Backbone.Marionette.CompositeView.extend({
  itemView: RowView,

  <span class="hljs-comment">// specify a jQuery selector to put the itemView instances in to</span>
  itemViewContainer: <span class="hljs-string">"tbody"</span>,

  template: <span class="hljs-string">"#table-template"</span>
});
</code></pre>
<p>This will put all of the <code>itemView</code> instances in to the <code>&lt;tbody&gt;</code> tag of<br />the composite view&#39;s rendered template, correctly producing the table<br />structure.</p><p>Alternatively, you can specify a function as the <code>itemViewContainer</code>. This<br />function needs to return a jQuery selector string, or a jQuery selector<br />object.</p><pre><code class="lang-js">TableView = Backbone.Marionette.CompositeView.extend({
  <span class="hljs-comment">// ...</span>

  itemViewContainer: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"#tbody"</span>
  }
});
</code></pre>
<p>Using a function allows for logic to be used for the selector. However,<br />only one value can be returned. Upon returning the first value, it will<br />be cached and that value will be used for the remainder of that view<br />instance&#39; lifecycle.</p><h2>CompositeView&#39;s <code>appendHtml</code></h2>
<p>Sometimes the <code>itemViewContainer</code> configuration is insuficient for<br />specifying where the itemView instance should be placed. If this is the<br />case, you can override the <code>appendHtml</code> method with your own implementation.</p><p>For example:</p><pre><code class="lang-js">TableView = Backbone.Marionette.CompositeView.extend({
  itemView: RowView,

  template: <span class="hljs-string">"#table-template"</span>,

  appendHtml: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(collectionView, itemView, index)</span></span>{
    collectionView.$(<span class="hljs-string">"tbody"</span>).append(itemView.el);
  }
});
</code></pre>
<p>For more information on the parameters of this method, see the<br /><a href="https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.collectionview.md">CollectionView&#39;s documentation</a>.</p><h2>Recursive By Default</h2>
<p>The default rendering mode for a <code>CompositeView</code> assumes a<br />hierarchical, recursive structure. If you configure a composite<br />view without specifying an <code>itemView</code>, you&#39;ll get the same<br />composite view type rendered for each item in the collection. If<br />you need to override this, you can specify a <code>itemView</code> in the<br />composite view&#39;s definition:</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> ItemView = Backbone.Marionette.ItemView.extend({});

<span class="hljs-keyword">var</span> CompView = Backbone.Marionette.CompositeView.extend({
  itemView: ItemView
});
</code></pre>
<h2>Model And Collection Rendering</h2>
<p>The model and collection for the composite view will re-render<br />themselves under the following conditions:</p><ul>
<li>When the collection&#39;s &quot;reset&quot; event is fired, it will only re-render the collection within the composite, and not the wrapper template</li>
<li>When the collection has a model added to it (the &quot;add&quot; event is fired), it will render that one item to the rendered list</li>
<li>When the collection has a model removed (the &quot;remove&quot; event is fired), it will remove that one item from the rendered list</li>
</ul>
<p>You can also manually re-render either or both of them:</p><ul>
<li>If you want to re-render everything, call the <code>.render()</code> method</li>
<li>If you want to re-render the model&#39;s view, you can call <code>.renderModel()</code></li>
<li>If you want to re-render the collection&#39;s views, you can call <code>.renderCollection()</code></li>
</ul>
<h2>Events And Callbacks</h2>
<p>During the course of rendering a composite, several events will<br />be triggered. These events are triggered with the <a href="./marionette.functions.md">Marionette.triggerMethod</a><br />function, which calls a corresponding &quot;on{EventName}&quot; method on the view.</p><ul>
<li>&quot;composite:item:rendered&quot; / <code>onCompositeItemRendered</code> - after the <code>modelView</code> has been rendered</li>
<li>&quot;composite:collection:rendered&quot; / <code>onCompositeCollectionRendered</code> - after the collection of models has been rendered</li>
<li>&quot;render&quot; / <code>onRender</code> and &quot;composite:rendered&quot; / <code>onCompositeRendered</code> - after everything has been rendered</li>
</ul>
<p>Additionally, after the composite view has been rendered, an<br /><code>onRender</code> method will be called. You can implement this in<br />your view to provide custom code for dealing with the view&#39;s<br /><code>el</code> after it has been rendered:</p><pre><code class="lang-js">Backbone.Marionette.CompositeView.extend({
  onRender: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// do stuff here</span>
  }
});
</code></pre>
<h2>Organizing ui elements</h2>
<p>Similar to ItemView, you can organize the ui elements inside the<br />CompositeView by specifying them in the <code>ui</code> hash. It should be<br />noted that the elements that can be accessed via this hash are<br />the elements that are directly rendered by the composite view<br />template, not those belonging to the collection.</p><p>The ui elements will be accessible as soon as the composite view<br />template is rendered (and before the collection is rendered),<br />which means you can even access them in the <code>onBeforeRender</code> method.</p><h2>modelEvents and collectionEvents</h2>
<p>CompositeViews can bind directly to model events and collection events<br />in a declarative manner:</p><pre><code class="lang-js">Marionette.CompositeView.extend({
  modelEvents: {
    <span class="hljs-string">"change"</span>: <span class="hljs-string">"modelChanged"</span>
  },

  collectionEvents: {
    <span class="hljs-string">"add"</span>: <span class="hljs-string">"modelAdded"</span>
  }
});
</code></pre>
<p>For more information, see the <a href="./marionette.view.md">Marionette.View</a> documentation.</p>
      </div>
    </div>
  </body>
  <script src="../../js/docs.js" type="text/javascript"></script>
</html>

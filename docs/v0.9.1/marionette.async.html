<html>
  <head>
    <title>marionette.async - Marionette.js Docs</title>
    <link rel="stylesheet" href="../../styles/docs.css">
  </head>
  <body>
    <div class="docs">
      <div class="docs__sidebar">
        <select id="version-dropdown">
          
            
              <option value="v2.3.0">v2.3.0</option>
            
          
            
              <option value="v2.3.0-pre">v2.3.0-pre</option>
            
          
            
              <option value="v2.2.2">v2.2.2</option>
            
          
            
              <option value="v2.2.1">v2.2.1</option>
            
          
            
              <option value="v2.2.0">v2.2.0</option>
            
          
            
              <option value="v2.2.0-pre.2">v2.2.0-pre.2</option>
            
          
            
              <option value="v2.2.0-pre">v2.2.0-pre</option>
            
          
            
              <option value="v2.1.0">v2.1.0</option>
            
          
            
              <option value="v2.1.0-pre">v2.1.0-pre</option>
            
          
            
              <option value="v2.0.3">v2.0.3</option>
            
          
            
              <option value="v2.0.2">v2.0.2</option>
            
          
            
              <option value="v2.0.1">v2.0.1</option>
            
          
            
              <option value="v2.0.0">v2.0.0</option>
            
          
            
              <option value="v2.0.0-pre.2">v2.0.0-pre.2</option>
            
          
            
              <option value="v2.0.0-pre.1">v2.0.0-pre.1</option>
            
          
            
              <option value="v1.8.8">v1.8.8</option>
            
          
            
              <option value="v1.8.7">v1.8.7</option>
            
          
            
              <option value="v1.8.6">v1.8.6</option>
            
          
            
              <option value="v1.8.5">v1.8.5</option>
            
          
            
              <option value="v1.8.4">v1.8.4</option>
            
          
            
              <option value="v1.8.3">v1.8.3</option>
            
          
            
              <option value="v1.8.2">v1.8.2</option>
            
          
            
              <option value="v1.8.1">v1.8.1</option>
            
          
            
              <option value="v1.8.0">v1.8.0</option>
            
          
            
              <option value="v1.7.4">v1.7.4</option>
            
          
            
              <option value="v1.7.3">v1.7.3</option>
            
          
            
              <option value="v1.7.2">v1.7.2</option>
            
          
            
              <option value="v1.7.1">v1.7.1</option>
            
          
            
              <option value="v1.7">v1.7</option>
            
          
            
              <option value="v1.6.4">v1.6.4</option>
            
          
            
              <option value="v1.6.3">v1.6.3</option>
            
          
            
              <option value="v1.6.2">v1.6.2</option>
            
          
            
              <option value="v1.6.1">v1.6.1</option>
            
          
            
              <option value="v1.6.0">v1.6.0</option>
            
          
            
              <option value="v1.5.1">v1.5.1</option>
            
          
            
              <option value="v1.5.0">v1.5.0</option>
            
          
            
              <option value="v1.4.1">v1.4.1</option>
            
          
            
              <option value="v1.4.0">v1.4.0</option>
            
          
            
              <option value="v1.4.0beta">v1.4.0beta</option>
            
          
            
              <option value="v1.3.0">v1.3.0</option>
            
          
            
              <option value="v1.2.3">v1.2.3</option>
            
          
            
              <option value="v1.2.2">v1.2.2</option>
            
          
            
              <option value="v1.2.1">v1.2.1</option>
            
          
            
              <option value="v1.2.0">v1.2.0</option>
            
          
            
              <option value="v1.1.0">v1.1.0</option>
            
          
            
              <option value="v1.0.4">v1.0.4</option>
            
          
            
              <option value="v1.0.3">v1.0.3</option>
            
          
            
              <option value="v1.0.2">v1.0.2</option>
            
          
            
              <option value="v1.0.1">v1.0.1</option>
            
          
            
              <option value="v1.0.0">v1.0.0</option>
            
          
            
              <option value="v1.0.0-rc6">v1.0.0-rc6</option>
            
          
            
              <option value="v1.0.0-rc5">v1.0.0-rc5</option>
            
          
            
              <option value="v1.0.0-rc4">v1.0.0-rc4</option>
            
          
            
              <option value="v1.0.0-rc3">v1.0.0-rc3</option>
            
          
            
              <option value="v1.0.0-rc2">v1.0.0-rc2</option>
            
          
            
              <option value="v1.0.0-rc1">v1.0.0-rc1</option>
            
          
            
              <option value="v1.0.0-beta6">v1.0.0-beta6</option>
            
          
            
              <option value="v1.0.0-beta5">v1.0.0-beta5</option>
            
          
            
              <option value="v1.0.0-beta4">v1.0.0-beta4</option>
            
          
            
              <option value="v1.0.0-beta3">v1.0.0-beta3</option>
            
          
            
              <option value="v1.0.0-beta2">v1.0.0-beta2</option>
            
          
            
              <option value="v1.0.0-beta1">v1.0.0-beta1</option>
            
          
            
              <option value="v0.10.2">v0.10.2</option>
            
          
            
              <option value="v0.10.1">v0.10.1</option>
            
          
            
              <option value="v0.10.0">v0.10.0</option>
            
          
            
              <option value="v0.9.13">v0.9.13</option>
            
          
            
              <option value="v0.9.12">v0.9.12</option>
            
          
            
              <option value="v0.9.11">v0.9.11</option>
            
          
            
              <option value="v0.9.10">v0.9.10</option>
            
          
            
              <option value="v0.9.9">v0.9.9</option>
            
          
            
              <option value="v0.9.8">v0.9.8</option>
            
          
            
              <option value="v0.9.7">v0.9.7</option>
            
          
            
              <option value="v0.9.6">v0.9.6</option>
            
          
            
              <option value="v0.9.5">v0.9.5</option>
            
          
            
              <option value="v0.9.4">v0.9.4</option>
            
          
            
              <option value="v0.9.3">v0.9.3</option>
            
          
            
              <option value="v0.9.2">v0.9.2</option>
            
          
            
              <option value="v0.9.1" selected="selected">v0.9.1</option>
            
          
            
              <option value="v0.9.0">v0.9.0</option>
            
          
            
              <option value="v0.8.4">v0.8.4</option>
            
          
            
              <option value="v0.8.3">v0.8.3</option>
            
          
            
              <option value="v0.8.2">v0.8.2</option>
            
          
            
              <option value="v0.8.1">v0.8.1</option>
            
          
            
              <option value="v0.8.0">v0.8.0</option>
            
          
            
              <option value="v0.7.6">v0.7.6</option>
            
          
            
              <option value="v0.7.5">v0.7.5</option>
            
          
            
              <option value="v0.7.4">v0.7.4</option>
            
          
            
              <option value="v0.7.3">v0.7.3</option>
            
          
            
              <option value="v0.7.2">v0.7.2</option>
            
          
            
              <option value="v0.7.1">v0.7.1</option>
            
          
            
              <option value="v0.7.0">v0.7.0</option>
            
          
            
              <option value="v0.6.3">v0.6.3</option>
            
          
            
              <option value="v0.6.2">v0.6.2</option>
            
          
            
              <option value="v0.6.1">v0.6.1</option>
            
          
            
              <option value="v0.6.0">v0.6.0</option>
            
          
            
              <option value="v0.5.2">v0.5.2</option>
            
          
            
              <option value="v0.5.1">v0.5.1</option>
            
          
            
              <option value="v0.5.0">v0.5.0</option>
            
          
            
              <option value="v0.4.8">v0.4.8</option>
            
          
            
              <option value="v0.4.7">v0.4.7</option>
            
          
            
              <option value="v0.4.6">v0.4.6</option>
            
          
            
              <option value="v0.4.5">v0.4.5</option>
            
          
            
              <option value="v0.4.4">v0.4.4</option>
            
          
            
              <option value="v0.4.3">v0.4.3</option>
            
          
            
              <option value="v0.4.2">v0.4.2</option>
            
          
            
              <option value="v0.4.1">v0.4.1</option>
            
          
            
              <option value="v0.4.1a">v0.4.1a</option>
            
          
            
              <option value="v0.4.0">v0.4.0</option>
            
          
            
              <option value="v0.3.1">v0.3.1</option>
            
          
            
              <option value="v0.3.0">v0.3.0</option>
            
          
            
              <option value="v0.2.6">v0.2.6</option>
            
          
            
              <option value="v0.2.5">v0.2.5</option>
            
          
            
              <option value="v0.2.4">v0.2.4</option>
            
          
            
              <option value="v0.2.3">v0.2.3</option>
            
          
            
              <option value="v0.2.2">v0.2.2</option>
            
          
            
              <option value="v0.2.1">v0.2.1</option>
            
          
            
              <option value="v0.2.0">v0.2.0</option>
            
          
            
              <option value="v0.1.0">v0.1.0</option>
            
          
        </select>
        <nav>
          
            <a href="marionette.application.html">marionette.application</a>
          
            <a href="marionette.application.module.html">marionette.application.module</a>
          
            <a href="marionette.approuter.html">marionette.approuter</a>
          
            <a href="marionette.async.html">marionette.async</a>
          
            <a href="marionette.bindto.html">marionette.bindto</a>
          
            <a href="marionette.callbacks.html">marionette.callbacks</a>
          
            <a href="marionette.collectionview.html">marionette.collectionview</a>
          
            <a href="marionette.compositeview.html">marionette.compositeview</a>
          
            <a href="marionette.eventaggregator.html">marionette.eventaggregator</a>
          
            <a href="marionette.itemview.html">marionette.itemview</a>
          
            <a href="marionette.layout.html">marionette.layout</a>
          
            <a href="marionette.region.html">marionette.region</a>
          
            <a href="marionette.renderer.html">marionette.renderer</a>
          
            <a href="marionette.templatecache.html">marionette.templatecache</a>
          
            <a href="marionette.view.html">marionette.view</a>
          
        </nav>
      </div>
      <div class="docs__content">
        <h1>Marionette.Async</h1>
<p>Add async / deferred rendering and template loading to Backbone.Marionette</p><h2>Download</h2>
<p>To add support for asynchronously loading templates and rendering views,<br />you need to download and include one of the following <code>marionette.async</code><br />builds in your project:</p><p>Development: <a href="https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.js">backbone.marionette.async.js</a></p><p>Production: <a href="https://raw.github.com/derickbailey/backbone.marionette/master/lib/backbone.marionette.async.min.js">backbone.marionette.async.min.js</a></p><h2>AMD/RequireJS Support</h2>
<p>Note that there is no AMD/RequireJS build for Marionette.Async.<br />AMD/RequireJS are asynchronous by definition: <strong>A</strong>synchronous<br /><strong>M</strong>odule <strong>D</strong>efinition. Providing an AMD/RequireJS version of<br />Marionette.Async would be redundant.</p><h2>Basic Usage</h2>
<p>To use Marionette.Async, you must include one of the above downloads in<br />your project, after Marionette has been included:</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/underscore.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/jquery.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/json2.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.marionette.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"/js/backbone.marionette.async.js"</span>&gt;</span><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Once that has been included, several core functions on several of the<br />Marionette objects will be overwritten with asynchronous counterparts.</p><p><strong>Note that this is destructive change.</strong> You cannot switch<br />back and forth between sync/async objects. Once included in the page, all<br />of the specified methods will run with async capabilities.</p><h2>Marionette.Async.Region</h2>
<p>The region manager <code>show</code> method takes advantage of jQuery&#39;s<br />deferred cababilities, allowing for some very advanced techniques<br />to be used for rendering views.</p><p>To use a deferred, a view that is shown via a region manager<br />must return a jQuery deferred object from the <code>render</code> method:</p><pre><code class="lang-js">DeferredView = Backbone.View.extend({
  render: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> data = <span class="hljs-keyword">this</span>.serializeData();
    <span class="hljs-keyword">var</span> dfd = jQuery.Deferred();

    <span class="hljs-keyword">this</span>.getTemplate(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(template)</span></span>{
      <span class="hljs-keyword">var</span> html = that.renderTemplate(template, data);

      that.$el.html(html);

      <span class="hljs-keyword">if</span> (that.onRender){
        that.onRender();
      }

      dfd.resolve();
    });

    <span class="hljs-keyword">return</span> dfd.promise();
  }
});

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> DeferredView();
MyApp.mainRegion.show(view);
</code></pre>
<p>The region manager will wait until the deferred object is resolved<br />before it attached the view&#39;s <code>el</code> to the DOM and displays it.</p><h2>Marionette.Async.ItemView</h2>
<p>The <code>render</code> method returns a jQuery deferred object, allowing<br />you to know when the rendering completes. </p><h2>Marionette.Async.CollectionView</h2>
<p>The <code>render</code> method returns a jQuery deferred object, allowing<br />you to know when the rendering completes. This deferred object<br />is resolved after all of the child views have been rendered.</p><h2>Marionette.Async.CompositeView</h2>
<p>A composite view returns a jQuery deferred object from the<br /><code>render</code> method. This allows you to know when the rendering for<br />the entire composite structure has been completed.</p><pre><code class="lang-js">MyComp = Backbone.Marionette.CompositeView.extend({...});

myComp = <span class="hljs-keyword">new</span> MyComp().render().done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// the entire composite is now rendered. do stuff here</span>
});
</code></pre>
<h2>Marionette.Async.TemplateCache</h2>
<p>The default template retrieval is to select the template contents<br />from the DOM using jQuery. If you wish to change the way this<br />works, you can override the <code>loadTemplate</code> method on the<br /><code>TemplateCache</code> object.</p><pre><code class="lang-js">Backbone.Marionette.TemplateCache.prototype.loadTemplate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateId, callback)</span></span>{
  <span class="hljs-comment">// load your template here, returning it or a deferred</span>
  <span class="hljs-comment">// object that resolves with the template as the only param</span>
  <span class="hljs-keyword">var</span> myTemplate = ...;

  <span class="hljs-comment">// send the template back</span>
  callback(myTemplate);
}
</code></pre>
<p>For example, if you want to load templates asychronously from the<br />server, instead of from the DOM, you could replace<br /><code>loadTemplate</code> function.</p><p>If a &quot;template.html&quot; file exists on the server, with this in it:</p><pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"my-template"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/template"</span>&gt;</span><span class="javascript">
  &lt;div&gt;some template stuff&lt;<span class="hljs-regexp">/div&gt;
</span></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Then the <code>loadTemplate</code> implementation may look like this:</p><pre><code class="lang-js">Backbone.Marionette.TemplateCache.loadTemplate = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateId, callback)</span></span>{
  <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">var</span> url = templateId + <span class="hljs-string">".html"</span>;

  $.get(url, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(templateHtml)</span></span>{
    <span class="hljs-keyword">var</span> template = $(tmplateHtml).find(templateId);
    callback(template);
  });
}
</code></pre>
<p>This will use jQuery to asynchronously retrieve the template from<br />the server. When the <code>get</code> completes, the callback function will<br />select the template from the resulting HTML and then call the<br /><code>callback</code> function to send it in to the template cache and allow<br />it to be used for rendering.</p>
      </div>
    </div>
  </body>
  <script src="../../js/docs.js" type="text/javascript"></script>
</html>

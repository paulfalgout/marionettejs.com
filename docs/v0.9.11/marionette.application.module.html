<html>
  <head>
    <title>marionette.application.module - Marionette.js Docs</title>
    <link rel="stylesheet" href="../../styles/docs.css">
  </head>
  <body>
    <div class="docs">
      <div class="docs__sidebar">
        <select id="version-dropdown">
          
            
              <option value="v2.3.0">v2.3.0</option>
            
          
            
              <option value="v2.3.0-pre">v2.3.0-pre</option>
            
          
            
              <option value="v2.2.2">v2.2.2</option>
            
          
            
              <option value="v2.2.1">v2.2.1</option>
            
          
            
              <option value="v2.2.0">v2.2.0</option>
            
          
            
              <option value="v2.2.0-pre.2">v2.2.0-pre.2</option>
            
          
            
              <option value="v2.2.0-pre">v2.2.0-pre</option>
            
          
            
              <option value="v2.1.0">v2.1.0</option>
            
          
            
              <option value="v2.1.0-pre">v2.1.0-pre</option>
            
          
            
              <option value="v2.0.3">v2.0.3</option>
            
          
            
              <option value="v2.0.2">v2.0.2</option>
            
          
            
              <option value="v2.0.1">v2.0.1</option>
            
          
            
              <option value="v2.0.0">v2.0.0</option>
            
          
            
              <option value="v2.0.0-pre.2">v2.0.0-pre.2</option>
            
          
            
              <option value="v2.0.0-pre.1">v2.0.0-pre.1</option>
            
          
            
              <option value="v1.8.8">v1.8.8</option>
            
          
            
              <option value="v1.8.7">v1.8.7</option>
            
          
            
              <option value="v1.8.6">v1.8.6</option>
            
          
            
              <option value="v1.8.5">v1.8.5</option>
            
          
            
              <option value="v1.8.4">v1.8.4</option>
            
          
            
              <option value="v1.8.3">v1.8.3</option>
            
          
            
              <option value="v1.8.2">v1.8.2</option>
            
          
            
              <option value="v1.8.1">v1.8.1</option>
            
          
            
              <option value="v1.8.0">v1.8.0</option>
            
          
            
              <option value="v1.7.4">v1.7.4</option>
            
          
            
              <option value="v1.7.3">v1.7.3</option>
            
          
            
              <option value="v1.7.2">v1.7.2</option>
            
          
            
              <option value="v1.7.1">v1.7.1</option>
            
          
            
              <option value="v1.7">v1.7</option>
            
          
            
              <option value="v1.6.4">v1.6.4</option>
            
          
            
              <option value="v1.6.3">v1.6.3</option>
            
          
            
              <option value="v1.6.2">v1.6.2</option>
            
          
            
              <option value="v1.6.1">v1.6.1</option>
            
          
            
              <option value="v1.6.0">v1.6.0</option>
            
          
            
              <option value="v1.5.1">v1.5.1</option>
            
          
            
              <option value="v1.5.0">v1.5.0</option>
            
          
            
              <option value="v1.4.1">v1.4.1</option>
            
          
            
              <option value="v1.4.0">v1.4.0</option>
            
          
            
              <option value="v1.4.0beta">v1.4.0beta</option>
            
          
            
              <option value="v1.3.0">v1.3.0</option>
            
          
            
              <option value="v1.2.3">v1.2.3</option>
            
          
            
              <option value="v1.2.2">v1.2.2</option>
            
          
            
              <option value="v1.2.1">v1.2.1</option>
            
          
            
              <option value="v1.2.0">v1.2.0</option>
            
          
            
              <option value="v1.1.0">v1.1.0</option>
            
          
            
              <option value="v1.0.4">v1.0.4</option>
            
          
            
              <option value="v1.0.3">v1.0.3</option>
            
          
            
              <option value="v1.0.2">v1.0.2</option>
            
          
            
              <option value="v1.0.1">v1.0.1</option>
            
          
            
              <option value="v1.0.0">v1.0.0</option>
            
          
            
              <option value="v1.0.0-rc6">v1.0.0-rc6</option>
            
          
            
              <option value="v1.0.0-rc5">v1.0.0-rc5</option>
            
          
            
              <option value="v1.0.0-rc4">v1.0.0-rc4</option>
            
          
            
              <option value="v1.0.0-rc3">v1.0.0-rc3</option>
            
          
            
              <option value="v1.0.0-rc2">v1.0.0-rc2</option>
            
          
            
              <option value="v1.0.0-rc1">v1.0.0-rc1</option>
            
          
            
              <option value="v1.0.0-beta6">v1.0.0-beta6</option>
            
          
            
              <option value="v1.0.0-beta5">v1.0.0-beta5</option>
            
          
            
              <option value="v1.0.0-beta4">v1.0.0-beta4</option>
            
          
            
              <option value="v1.0.0-beta3">v1.0.0-beta3</option>
            
          
            
              <option value="v1.0.0-beta2">v1.0.0-beta2</option>
            
          
            
              <option value="v1.0.0-beta1">v1.0.0-beta1</option>
            
          
            
              <option value="v0.10.2">v0.10.2</option>
            
          
            
              <option value="v0.10.1">v0.10.1</option>
            
          
            
              <option value="v0.10.0">v0.10.0</option>
            
          
            
              <option value="v0.9.13">v0.9.13</option>
            
          
            
              <option value="v0.9.12">v0.9.12</option>
            
          
            
              <option value="v0.9.11" selected="selected">v0.9.11</option>
            
          
            
              <option value="v0.9.10">v0.9.10</option>
            
          
            
              <option value="v0.9.9">v0.9.9</option>
            
          
            
              <option value="v0.9.8">v0.9.8</option>
            
          
            
              <option value="v0.9.7">v0.9.7</option>
            
          
            
              <option value="v0.9.6">v0.9.6</option>
            
          
            
              <option value="v0.9.5">v0.9.5</option>
            
          
            
              <option value="v0.9.4">v0.9.4</option>
            
          
            
              <option value="v0.9.3">v0.9.3</option>
            
          
            
              <option value="v0.9.2">v0.9.2</option>
            
          
            
              <option value="v0.9.1">v0.9.1</option>
            
          
            
              <option value="v0.9.0">v0.9.0</option>
            
          
            
              <option value="v0.8.4">v0.8.4</option>
            
          
            
              <option value="v0.8.3">v0.8.3</option>
            
          
            
              <option value="v0.8.2">v0.8.2</option>
            
          
            
              <option value="v0.8.1">v0.8.1</option>
            
          
            
              <option value="v0.8.0">v0.8.0</option>
            
          
            
              <option value="v0.7.6">v0.7.6</option>
            
          
            
              <option value="v0.7.5">v0.7.5</option>
            
          
            
              <option value="v0.7.4">v0.7.4</option>
            
          
            
              <option value="v0.7.3">v0.7.3</option>
            
          
            
              <option value="v0.7.2">v0.7.2</option>
            
          
            
              <option value="v0.7.1">v0.7.1</option>
            
          
            
              <option value="v0.7.0">v0.7.0</option>
            
          
            
              <option value="v0.6.3">v0.6.3</option>
            
          
            
              <option value="v0.6.2">v0.6.2</option>
            
          
            
              <option value="v0.6.1">v0.6.1</option>
            
          
            
              <option value="v0.6.0">v0.6.0</option>
            
          
            
              <option value="v0.5.2">v0.5.2</option>
            
          
            
              <option value="v0.5.1">v0.5.1</option>
            
          
            
              <option value="v0.5.0">v0.5.0</option>
            
          
            
              <option value="v0.4.8">v0.4.8</option>
            
          
            
              <option value="v0.4.7">v0.4.7</option>
            
          
            
              <option value="v0.4.6">v0.4.6</option>
            
          
            
              <option value="v0.4.5">v0.4.5</option>
            
          
            
              <option value="v0.4.4">v0.4.4</option>
            
          
            
              <option value="v0.4.3">v0.4.3</option>
            
          
            
              <option value="v0.4.2">v0.4.2</option>
            
          
            
              <option value="v0.4.1">v0.4.1</option>
            
          
            
              <option value="v0.4.1a">v0.4.1a</option>
            
          
            
              <option value="v0.4.0">v0.4.0</option>
            
          
            
              <option value="v0.3.1">v0.3.1</option>
            
          
            
              <option value="v0.3.0">v0.3.0</option>
            
          
            
              <option value="v0.2.6">v0.2.6</option>
            
          
            
              <option value="v0.2.5">v0.2.5</option>
            
          
            
              <option value="v0.2.4">v0.2.4</option>
            
          
            
              <option value="v0.2.3">v0.2.3</option>
            
          
            
              <option value="v0.2.2">v0.2.2</option>
            
          
            
              <option value="v0.2.1">v0.2.1</option>
            
          
            
              <option value="v0.2.0">v0.2.0</option>
            
          
            
              <option value="v0.1.0">v0.1.0</option>
            
          
        </select>
        <nav>
          
            <a href="marionette.application.html">marionette.application</a>
          
            <a href="marionette.application.module.html">marionette.application.module</a>
          
            <a href="marionette.approuter.html">marionette.approuter</a>
          
            <a href="marionette.async.html">marionette.async</a>
          
            <a href="marionette.callbacks.html">marionette.callbacks</a>
          
            <a href="marionette.collectionview.html">marionette.collectionview</a>
          
            <a href="marionette.compositeview.html">marionette.compositeview</a>
          
            <a href="marionette.eventaggregator.html">marionette.eventaggregator</a>
          
            <a href="marionette.eventbinder.html">marionette.eventbinder</a>
          
            <a href="marionette.itemview.html">marionette.itemview</a>
          
            <a href="marionette.layout.html">marionette.layout</a>
          
            <a href="marionette.region.html">marionette.region</a>
          
            <a href="marionette.renderer.html">marionette.renderer</a>
          
            <a href="marionette.templatecache.html">marionette.templatecache</a>
          
            <a href="marionette.view.html">marionette.view</a>
          
        </nav>
      </div>
      <div class="docs__content">
        <h1>Marionette.Application.module</h1>
<p>Marionette allows you to define a module within your application,<br />including sub-modules hanging from that module. This is useful for creating<br />modular, encapsulated applications that are be split apart in to multiple<br />files.</p><p>Marionette&#39;s module allow you to have unlimited sub-modules hanging off<br />your application, and serve as an event aggregator in themselves.</p><h2>Basic Usage</h2>
<p>A module is defined directly from an Application object as the specified<br />name:</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> MyApp = <span class="hljs-keyword">new</span> Backbone.Marionette.Application();

<span class="hljs-keyword">var</span> myModule = MyApp.module(<span class="hljs-string">"MyModule"</span>);

MyApp.MyModule; <span class="hljs-comment">// =&gt; a new Marionette.Application object</span>

myModule === MyApp.MyModule; <span class="hljs-comment">// =&gt; true</span>
</code></pre>
<p>If you specify the same module name more than once, the<br />first instance of the module will be retained and a new<br />instance will not be created.</p><h2>Starting And Stopping Modules</h2>
<p>Modules can be started and stopped independently of the application and<br />of each other. This allows them to be loaded asynchronously, and also allows<br />them to be shut down when they are no longer needed. This also facilitates<br />easier unit testing of modules in isolation as you can start only the<br />module that you need in your tests.</p><h3>Starting Modules</h3>
<p>Starting a module is done in one of two ways:</p><ol>
<li>Automatically with the parent application&#39;s <code>.start()</code> method</li>
<li>Manually call the <code>.start()</code> method on the module</li>
</ol>
<p>In this example, the module will be started automatically with the parent<br />application object&#39;s <code>start</code> call:</p><pre><code class="lang-js">MyApp = <span class="hljs-keyword">new</span> Backbone.Marionette.Application();

MyApp.module(<span class="hljs-string">"Foo"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{

  <span class="hljs-comment">// module code goes here</span>

});

MyApp.start();
</code></pre>
<p>Note that modules loaded and defined after the <code>app.start()</code> call will still<br />be started automatically.</p><p>If you wish to manually start a module instead of having the application<br />start it, you can tell the module definition not to start with the app:</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> fooModule = MyApp.module(<span class="hljs-string">"Foo"</span>, {
  startWithApp: <span class="hljs-literal">false</span>,

  define: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// module code goes here</span>
  }
});

<span class="hljs-comment">// later, start the module</span>
fooModule.start();
</code></pre>
<p>Note the use of an object literal instead of just a function to define<br />the module, and the presence of the <code>startWithApp</code> attribute, to tell it<br />not to start with the application.</p><p>Then to start the module, the module&#39;s <code>start</code> method is manually called.<br />You can also grab a reference to the module at a later point in time, to<br />start it:</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo"</span>, {
  startWithApp: <span class="hljs-literal">false</span>,
  define: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{ <span class="hljs-comment">/*...*/</span> }
});

<span class="hljs-comment">// start the module by getting a reference to it first</span>
MyApp.module(<span class="hljs-string">"Foo"</span>).start();
</code></pre>
<h3>Stopping Modules</h3>
<p>A module can be stopped, or shut down, to clear memory and resources when<br />the module is no longer needed. This is done with the <code>stop</code> method<br />on modules.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo"</span>).stop();
</code></pre>
<p>Modules are not automatically stopped by the application. If you wish to<br />stop one, you must call the <code>stop</code> method on it. The exception to this is<br />that stopping a parent module will stop all of it&#39;s sub-modules.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo.Bar.Baz"</span>);

MyApp.module(<span class="hljs-string">"Foo"</span>).stop();
</code></pre>
<p>This call to <code>stop</code> causes the <code>Bar</code> and <code>Baz</code> modules to both be stopped<br />as they are sub-modules of <code>Foo</code>. For more information on defining<br />sub-modules, see the next section: &quot;Defining Sub-Modules With . Notation&quot;.</p><h2>Defining Sub-Modules With . Notation</h2>
<p>Sub-modules or child modules can be defined as a hierarchy of modules and<br />sub-modules all at once:</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Parent.Child.GrandChild"</span>);

MyApp.Parent; <span class="hljs-comment">// =&gt; a valid module object</span>
MyApp.Parent.Child; <span class="hljs-comment">// =&gt; a valid module object</span>
MyApp.Parent.Child.GrandChild; <span class="hljs-comment">// =&gt; a valid module object</span>
</code></pre>
<p>When defining sub-modules using the dot-notation, the<br />parent modules do not need to exist. They will be created<br />for you if they don&#39;t exist. If they do exist, though, the<br />existing module will be used instead of creating a new one.</p><h2>Module Definitions</h2>
<p>You can specify a callback function to provide a definition<br />for the module. Module definitions are invoked immediately<br />on calling <code>module</code> method. </p><p>The module definition callback will receive 6 parameters:</p><ul>
<li>The module itself</li>
<li>The Parent module, or Application object that <code>.module</code> was called from</li>
<li>Backbone</li>
<li>Backbone.Marionette</li>
<li>jQuery</li>
<li>Underscore</li>
<li>Any custom arguments</li>
</ul>
<p>You can add functions and data directly to your module to make<br />them publicly accessible. You can also add private functions<br />and data by using locally scoped variables.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"MyModule"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(MyModule, MyApp, Backbone, Marionette, $, _)</span></span>{

  <span class="hljs-comment">// Private Data And Functions</span>
  <span class="hljs-comment">// --------------------------</span>

  <span class="hljs-keyword">var</span> myData = <span class="hljs-string">"this is private data"</span>;

  <span class="hljs-keyword">var</span> myFunction = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">console</span>.log(myData);
  }


  <span class="hljs-comment">// Public Data And Functions</span>
  <span class="hljs-comment">// -------------------------</span>

  MyModule.someData = <span class="hljs-string">"public data"</span>;

  MyModule.someFunction = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-built_in">console</span>.log(MyModule.someData);
  }
});

<span class="hljs-built_in">console</span>.log(MyApp.MyModule.someData); <span class="hljs-comment">//=&gt; public data</span>
MyApp.MyModule.someFunction(); <span class="hljs-comment">//=&gt; public data</span>
</code></pre>
<h3>Module Initializers</h3>
<p>Modules have initializers, similarly to <code>Application</code> objects. A module&#39;s<br />initializers are run when the module is started.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(Foo)</span></span>{

  Foo.addInitializer(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// initialize and start the module's running code, here.</span>
  });

});
</code></pre>
<p>Any way of starting this module will cause it&#39;s initializers to run. You<br />can have as many initializers for a module as you wish.</p><h3>Module Finalizers</h3>
<p>Modules also have finalizers that are run when a module is stopped.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(Foo)</span></span>{

  Foo.addFinalizer(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// tear down, shut down and clean up the module, here</span>
  });

});
</code></pre>
<p>Calling the <code>stop</code> method on the module will run all that module&#39;s<br />finalizers. A module can have as many finalizers as you wish.</p><h2>The Module&#39;s <code>this</code> Argument</h2>
<p>The module&#39;s <code>this</code> argument is set to the module itself.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"Foo"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(Foo)</span></span>{
  <span class="hljs-keyword">this</span> === Foo; <span class="hljs-comment">//=&gt; true</span>
});
</code></pre>
<h2>Custom Arguments</h2>
<p>You can provide any number of custom arguments to your module, after the<br />module definition function. This will allow you to import 3rd party<br />libraries, and other resources that you want to have locally scoped to<br />your module.</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"MyModule"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(MyModule, MyApp, Backbone, Marionette, $, _, Lib1, Lib2, LibEtc)</span></span>{

  <span class="hljs-comment">// Lib1 === LibraryNumber1;</span>
  <span class="hljs-comment">// Lib2 === LibraryNumber2;</span>
  <span class="hljs-comment">// LibEtc === LibraryNumberEtc;</span>

}, LibraryNumber1, LibraryNumber2, LibraryNumberEtc);
</code></pre>
<h2>Splitting A Module Definition Apart</h2>
<p>Sometimes a module gets to be too long for a single file. In<br />this case, you can split a module definition across multiple<br />files:</p><pre><code class="lang-js">MyApp.module(<span class="hljs-string">"MyModule"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(MyModule)</span></span>{
  MyModule.definition1 = <span class="hljs-literal">true</span>;
});

MyApp.module(<span class="hljs-string">"MyModule"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(MyModule)</span></span>{
  MyModule.definition2 = <span class="hljs-literal">true</span>;
});

MyApp.MyModule.definition1; <span class="hljs-comment">//=&gt; true</span>
MyApp.MyModule.definition2; <span class="hljs-comment">//=&gt; true</span>
</code></pre>

      </div>
    </div>
  </body>
  <script src="../../js/docs.js" type="text/javascript"></script>
</html>

<html>
  <head>
    <title>marionette.collectionview - Marionette.js Docs</title>
    <link rel="stylesheet" href="../../styles/docs.css">
  </head>
  <body>
    <div class="docs">
      <div class="docs__sidebar">
        <select id="version-dropdown">
          
            
              <option value="v2.3.0">v2.3.0</option>
            
          
            
              <option value="v2.3.0-pre">v2.3.0-pre</option>
            
          
            
              <option value="v2.2.2">v2.2.2</option>
            
          
            
              <option value="v2.2.1">v2.2.1</option>
            
          
            
              <option value="v2.2.0">v2.2.0</option>
            
          
            
              <option value="v2.2.0-pre.2">v2.2.0-pre.2</option>
            
          
            
              <option value="v2.2.0-pre">v2.2.0-pre</option>
            
          
            
              <option value="v2.1.0">v2.1.0</option>
            
          
            
              <option value="v2.1.0-pre">v2.1.0-pre</option>
            
          
            
              <option value="v2.0.3">v2.0.3</option>
            
          
            
              <option value="v2.0.2">v2.0.2</option>
            
          
            
              <option value="v2.0.1">v2.0.1</option>
            
          
            
              <option value="v2.0.0">v2.0.0</option>
            
          
            
              <option value="v2.0.0-pre.2">v2.0.0-pre.2</option>
            
          
            
              <option value="v2.0.0-pre.1">v2.0.0-pre.1</option>
            
          
            
              <option value="v1.8.8">v1.8.8</option>
            
          
            
              <option value="v1.8.7">v1.8.7</option>
            
          
            
              <option value="v1.8.6">v1.8.6</option>
            
          
            
              <option value="v1.8.5">v1.8.5</option>
            
          
            
              <option value="v1.8.4">v1.8.4</option>
            
          
            
              <option value="v1.8.3">v1.8.3</option>
            
          
            
              <option value="v1.8.2">v1.8.2</option>
            
          
            
              <option value="v1.8.1">v1.8.1</option>
            
          
            
              <option value="v1.8.0">v1.8.0</option>
            
          
            
              <option value="v1.7.4">v1.7.4</option>
            
          
            
              <option value="v1.7.3">v1.7.3</option>
            
          
            
              <option value="v1.7.2">v1.7.2</option>
            
          
            
              <option value="v1.7.1">v1.7.1</option>
            
          
            
              <option value="v1.7">v1.7</option>
            
          
            
              <option value="v1.6.4">v1.6.4</option>
            
          
            
              <option value="v1.6.3">v1.6.3</option>
            
          
            
              <option value="v1.6.2">v1.6.2</option>
            
          
            
              <option value="v1.6.1">v1.6.1</option>
            
          
            
              <option value="v1.6.0">v1.6.0</option>
            
          
            
              <option value="v1.5.1">v1.5.1</option>
            
          
            
              <option value="v1.5.0">v1.5.0</option>
            
          
            
              <option value="v1.4.1">v1.4.1</option>
            
          
            
              <option value="v1.4.0">v1.4.0</option>
            
          
            
              <option value="v1.4.0beta">v1.4.0beta</option>
            
          
            
              <option value="v1.3.0">v1.3.0</option>
            
          
            
              <option value="v1.2.3">v1.2.3</option>
            
          
            
              <option value="v1.2.2">v1.2.2</option>
            
          
            
              <option value="v1.2.1">v1.2.1</option>
            
          
            
              <option value="v1.2.0">v1.2.0</option>
            
          
            
              <option value="v1.1.0">v1.1.0</option>
            
          
            
              <option value="v1.0.4">v1.0.4</option>
            
          
            
              <option value="v1.0.3">v1.0.3</option>
            
          
            
              <option value="v1.0.2">v1.0.2</option>
            
          
            
              <option value="v1.0.1">v1.0.1</option>
            
          
            
              <option value="v1.0.0">v1.0.0</option>
            
          
            
              <option value="v1.0.0-rc6">v1.0.0-rc6</option>
            
          
            
              <option value="v1.0.0-rc5" selected="selected">v1.0.0-rc5</option>
            
          
            
              <option value="v1.0.0-rc4">v1.0.0-rc4</option>
            
          
            
              <option value="v1.0.0-rc3">v1.0.0-rc3</option>
            
          
            
              <option value="v1.0.0-rc2">v1.0.0-rc2</option>
            
          
            
              <option value="v1.0.0-rc1">v1.0.0-rc1</option>
            
          
            
              <option value="v1.0.0-beta6">v1.0.0-beta6</option>
            
          
            
              <option value="v1.0.0-beta5">v1.0.0-beta5</option>
            
          
            
              <option value="v1.0.0-beta4">v1.0.0-beta4</option>
            
          
            
              <option value="v1.0.0-beta3">v1.0.0-beta3</option>
            
          
            
              <option value="v1.0.0-beta2">v1.0.0-beta2</option>
            
          
            
              <option value="v1.0.0-beta1">v1.0.0-beta1</option>
            
          
            
              <option value="v0.10.2">v0.10.2</option>
            
          
            
              <option value="v0.10.1">v0.10.1</option>
            
          
            
              <option value="v0.10.0">v0.10.0</option>
            
          
            
              <option value="v0.9.13">v0.9.13</option>
            
          
            
              <option value="v0.9.12">v0.9.12</option>
            
          
            
              <option value="v0.9.11">v0.9.11</option>
            
          
            
              <option value="v0.9.10">v0.9.10</option>
            
          
            
              <option value="v0.9.9">v0.9.9</option>
            
          
            
              <option value="v0.9.8">v0.9.8</option>
            
          
            
              <option value="v0.9.7">v0.9.7</option>
            
          
            
              <option value="v0.9.6">v0.9.6</option>
            
          
            
              <option value="v0.9.5">v0.9.5</option>
            
          
            
              <option value="v0.9.4">v0.9.4</option>
            
          
            
              <option value="v0.9.3">v0.9.3</option>
            
          
            
              <option value="v0.9.2">v0.9.2</option>
            
          
            
              <option value="v0.9.1">v0.9.1</option>
            
          
            
              <option value="v0.9.0">v0.9.0</option>
            
          
            
              <option value="v0.8.4">v0.8.4</option>
            
          
            
              <option value="v0.8.3">v0.8.3</option>
            
          
            
              <option value="v0.8.2">v0.8.2</option>
            
          
            
              <option value="v0.8.1">v0.8.1</option>
            
          
            
              <option value="v0.8.0">v0.8.0</option>
            
          
            
              <option value="v0.7.6">v0.7.6</option>
            
          
            
              <option value="v0.7.5">v0.7.5</option>
            
          
            
              <option value="v0.7.4">v0.7.4</option>
            
          
            
              <option value="v0.7.3">v0.7.3</option>
            
          
            
              <option value="v0.7.2">v0.7.2</option>
            
          
            
              <option value="v0.7.1">v0.7.1</option>
            
          
            
              <option value="v0.7.0">v0.7.0</option>
            
          
            
              <option value="v0.6.3">v0.6.3</option>
            
          
            
              <option value="v0.6.2">v0.6.2</option>
            
          
            
              <option value="v0.6.1">v0.6.1</option>
            
          
            
              <option value="v0.6.0">v0.6.0</option>
            
          
            
              <option value="v0.5.2">v0.5.2</option>
            
          
            
              <option value="v0.5.1">v0.5.1</option>
            
          
            
              <option value="v0.5.0">v0.5.0</option>
            
          
            
              <option value="v0.4.8">v0.4.8</option>
            
          
            
              <option value="v0.4.7">v0.4.7</option>
            
          
            
              <option value="v0.4.6">v0.4.6</option>
            
          
            
              <option value="v0.4.5">v0.4.5</option>
            
          
            
              <option value="v0.4.4">v0.4.4</option>
            
          
            
              <option value="v0.4.3">v0.4.3</option>
            
          
            
              <option value="v0.4.2">v0.4.2</option>
            
          
            
              <option value="v0.4.1">v0.4.1</option>
            
          
            
              <option value="v0.4.1a">v0.4.1a</option>
            
          
            
              <option value="v0.4.0">v0.4.0</option>
            
          
            
              <option value="v0.3.1">v0.3.1</option>
            
          
            
              <option value="v0.3.0">v0.3.0</option>
            
          
            
              <option value="v0.2.6">v0.2.6</option>
            
          
            
              <option value="v0.2.5">v0.2.5</option>
            
          
            
              <option value="v0.2.4">v0.2.4</option>
            
          
            
              <option value="v0.2.3">v0.2.3</option>
            
          
            
              <option value="v0.2.2">v0.2.2</option>
            
          
            
              <option value="v0.2.1">v0.2.1</option>
            
          
            
              <option value="v0.2.0">v0.2.0</option>
            
          
            
              <option value="v0.1.0">v0.1.0</option>
            
          
        </select>
        <nav>
          
            <a href="marionette.application.html">marionette.application</a>
          
            <a href="marionette.application.module.html">marionette.application.module</a>
          
            <a href="marionette.approuter.html">marionette.approuter</a>
          
            <a href="marionette.callbacks.html">marionette.callbacks</a>
          
            <a href="marionette.collectionview.html">marionette.collectionview</a>
          
            <a href="marionette.commands.html">marionette.commands</a>
          
            <a href="marionette.compositeview.html">marionette.compositeview</a>
          
            <a href="marionette.controller.html">marionette.controller</a>
          
            <a href="marionette.functions.html">marionette.functions</a>
          
            <a href="marionette.itemview.html">marionette.itemview</a>
          
            <a href="marionette.layout.html">marionette.layout</a>
          
            <a href="marionette.region.html">marionette.region</a>
          
            <a href="marionette.renderer.html">marionette.renderer</a>
          
            <a href="marionette.requestresponse.html">marionette.requestresponse</a>
          
            <a href="marionette.templatecache.html">marionette.templatecache</a>
          
            <a href="marionette.view.html">marionette.view</a>
          
        </nav>
      </div>
      <div class="docs__content">
        <h1>Marionette.CollectionView</h1>
<p>The <code>CollectionView</code> will loop through all of the models in the<br />specified collection, render each of them using a specified <code>itemView</code>,<br />then append the results of the item view&#39;s <code>el</code> to the collection view&#39;s<br /><code>el</code>.</p><h2>Documentation Index</h2>
<ul>
<li><a href="#collectionviews-itemview">CollectionView&#39;s <code>itemView</code></a></li>
<li><a href="#collectionviews-itemviewoptions">CollectionView&#39;s <code>itemViewOptions</code></a></li>
<li><a href="#collectionviews-emptyview">CollectionView&#39;s <code>emptyView</code></a></li>
<li><a href="#collectionviews-builditemview">CollectionView&#39;s <code>buildItemView</code></a></li>
<li><a href="#callback-methods">Callback Methods</a><ul>
<li><a href="#beforerender-callback">onBeforeRender callback</a></li>
<li><a href="#onrender-callback">onRender callback</a></li>
<li><a href="#onitemadded-callback">onItemAdded callback</a></li>
<li><a href="#beforeclose-callback">onBeforeClose callback</a></li>
<li><a href="#onclose-callback">onClose callback</a></li>
</ul>
</li>
<li><a href="#collectionview-events">CollectionView Events</a><ul>
<li><a href="#beforerender--onbeforerender-event">&quot;before:render&quot; / onBeforeRender event</a></li>
<li><a href="#render--onrender-event">&quot;render&quot; / onRender event</a></li>
<li><a href="#beforeclose--onbeforeclose-event">&quot;before:close&quot; / onBeforeClose event</a></li>
<li><a href="#closed--collectionclosed-event">&quot;closed&quot; / &quot;collection:closed&quot; event</a></li>
<li><a href="#beforeitemadded--afteritemadded">&quot;before:item:added&quot; / &quot;after:item:added&quot;</a></li>
<li><a href="#itemremoved--onitemremoved">&quot;item:removed&quot; / onItemRemoved</a></li>
<li><a href="#itemview-event-bubbling-from-child-views">&quot;itemview:*&quot; event bubbling from child views</a></li>
</ul>
</li>
<li><a href="#collectionviews-itemvieweventprefix">CollectionView&#39;s <code>itemViewEventPrefix</code></a></li>
<li><a href="#collectionview-render">CollectionView render</a></li>
<li><a href="#collectionview-automatic-rendering">CollectionView: Automatic Rendering</a></li>
<li><a href="#collectionview-re-render-collection">CollectionView: Re-render Collection</a></li>
<li><a href="#collectionviews-appendhtml">CollectionView&#39;s appendHtml</a></li>
<li><a href="#collectionviews-children">CollectionView&#39;s children</a></li>
<li><a href="#collectionview-close">CollectionView close</a></li>
</ul>
<h2>CollectionView&#39;s <code>itemView</code></h2>
<p>Specify an <code>itemView</code> in your collection view definition. This must be<br />a Backbone view object definition, not an instance. It can be any<br /><code>Backbone.View</code> or be derived from <code>Marionette.ItemView</code>.</p><pre><code class="lang-js">MyItemView = Backbone.Marionette.ItemView.extend({});

Backbone.Marionette.CollectionView.extend({
  itemView: MyItemView
});
</code></pre>
<p>Alternatively, you can specify an <code>itemView</code> in the options for<br />the constructor:</p><pre><code class="lang-js">MyCollectionView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">new</span> MyCollectionView({
  itemView: MyItemView
});
</code></pre>
<p>If you do not specify an <code>itemView</code>, an exception will be thrown<br />stating that you must specify an <code>itemView</code>.</p><p>If you need a view specific to your model, you can override<br /><code>getItemView</code>:</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  getItemView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item)</span> </span>{
    <span class="hljs-comment">// some logic to calculate which view to return</span>
    <span class="hljs-keyword">return</span> someItemSpecificView;
  }
})
</code></pre>
<h2>CollectionView&#39;s <code>itemViewOptions</code></h2>
<p>There may be scenarios where you need to pass data from your parent<br />collection view in to each of the itemView instances. To do this, provide<br />a <code>itemViewOptions</code> definition on your collection view as an object<br />literal. This will be passed to the constructor of your itemView as part<br />of the <code>options</code>.</p><pre><code class="lang-js">ItemView = Backbone.Marionette.ItemView({
  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(options)</span></span>{
    <span class="hljs-built_in">console</span>.log(options.foo); <span class="hljs-comment">// =&gt; "bar"</span>
  }
});

CollectionView = Backbone.Marionette.CollectionView({
  itemView: ItemView,

  itemViewOptions: {
    foo: <span class="hljs-string">"bar"</span>
  } 
});
</code></pre>
<p>You can also specify the <code>itemViewOptions</code> as a function, if you need to<br />calculate the values to return at runtime. The model will be passed into<br />the function should you need access to it when calculating<br /><code>itemViewOptions</code>. The function must return an object, and the attributes<br />of the object will be copied to the <code>itemView</code> instance&#39;s options.</p><pre><code class="lang-js">CollectionView = Backbone.Marionette.CollectionView({
  itemViewOptions: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(model)</span> </span>{
    <span class="hljs-comment">// do some calculations based on the model</span>
    <span class="hljs-keyword">return</span> {
      foo: <span class="hljs-string">"bar"</span>
    }   
  }  
});
</code></pre>
<h2>CollectionView&#39;s <code>emptyView</code></h2>
<p>When a collection has no items, and you need to render a view other than<br />the list of itemViews, you can specify an <code>emptyView</code> attribute on your<br />collection view.</p><pre><code class="lang-js">NoItemsView = Backbone.Marionette.ItemView.extend({
  template: <span class="hljs-string">"#show-no-items-message-template"</span>
});

Backbone.Marionette.CollectionView.extend({
  <span class="hljs-comment">// ...</span>

  emptyView: NoItemsView
});
</code></pre>
<p>This will render the <code>emptyView</code> and display the message that needs to<br />be displayed when there are no items.</p><h2>CollectionView&#39;s <code>buildItemView</code></h2>
<p>When a custom view instance needs to be created for the <code>itemView</code> that<br />represents an item, override the <code>buildItemView</code> method. This method<br />takes three parameters and returns a view instance to be used as the<br />item view.</p><pre><code class="lang-js">buildItemView: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(item, ItemViewType, itemViewOptions)</span></span>{
  <span class="hljs-comment">// build the final list of options for the item view type</span>
  <span class="hljs-keyword">var</span> options = _.extend({model: item}, itemViewOptions);
  <span class="hljs-comment">// create the item view instance</span>
  <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ItemViewType(options);
  <span class="hljs-comment">// return it</span>
  <span class="hljs-keyword">return</span> view;
},
</code></pre>
<h2>Callback Methods</h2>
<p>There are several callback methods that can be provided on a<br /><code>CollectionView</code>. If they are found, they will be called by the<br />view&#39;s base methods. These callback methods are intended to be<br />handled within the view definition directly.</p><h3>onBeforeRender callback</h3>
<p>A <code>onBeforeRender</code> callback will be called just prior to rendering<br />the collection view.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onBeforeRender: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// do stuff here</span>
  }
});
</code></pre>
<h3>onRender callback</h3>
<p>After the view has been rendered, a <code>onRender</code> method will be called.<br />You can implement this in your view to provide custom code for dealing<br />with the view&#39;s <code>el</code> after it has been rendered:</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onRender: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// do stuff here</span>
  }
});
</code></pre>
<h3>onItemAdded callback</h3>
<p>This callback function allows you to know when an item / item view<br />instance has been added to the collection view. It provides access to<br />the view instance for the item that was added.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onItemAdded: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(itemView)</span></span>{
    <span class="hljs-comment">// work with the itemView instance, here</span>
  }
});
</code></pre>
<h3>onBeforeClose callback</h3>
<p>This method is called just before closing the view.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onBeforeClose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// do stuff here</span>
  }
});
</code></pre>
<h3>onClose callback</h3>
<p>This method is called just after closing the view.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onClose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// do stuff here</span>
  }
});
</code></pre>
<h2>CollectionView Events</h2>
<p>There are several events that will be triggered during the life<br />of a collection view. Each of these events is called with the<br /><a href="./marionette.functions.md">Marionette.triggerMethod</a> function,<br />which calls a corresponding &quot;on{EventName}&quot; method on the<br />view instance.</p><h3>&quot;before:render&quot; / onBeforeRender event</h3>
<p>Triggers just prior to the view being rendered. Also triggered as<br />&quot;collection:before:render&quot; / <code>onCollectionBeforeRender</code>.</p><pre><code class="lang-js">MyView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">var</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.on(<span class="hljs-string">"before:render"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  alert(<span class="hljs-string">"the collection view is about to be rendered"</span>);
});

myView.render();
</code></pre>
<h3>&quot;render&quot; / onRender event</h3>
<p>A &quot;collection:rendered&quot; / <code>onCollectionRendered</code> event will also be fired. This allows you to<br />add more than one callback to execute after the view is rendered,<br />and allows parent views and other parts of the application to<br />know that the view was rendered.</p><pre><code class="lang-js">MyView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">var</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.on(<span class="hljs-string">"render"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  alert(<span class="hljs-string">"the collection view was rendered!"</span>);
});

myView.on(<span class="hljs-string">"collection:rendered"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  alert(<span class="hljs-string">"the collection view was rendered!"</span>);
});

myView.render();
</code></pre>
<h3>&quot;before:close&quot; / onBeforeClose event</h3>
<p>Triggered just before closing the view. A &quot;collection:before:close&quot; /<br /><code>onCollectionBeforeClose</code> event will also be fired</p><pre><code class="lang-js">MyView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">var</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.on(<span class="hljs-string">"collection:before:close"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  alert(<span class="hljs-string">"the collection view is about to be closed"</span>);
});

myView.close();
</code></pre>
<h3>&quot;closed&quot; / &quot;collection:closed&quot; event</h3>
<p>Triggered just after closing the view, both with corresponding<br />method calls.</p><pre><code class="lang-js">MyView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">var</span> myView = <span class="hljs-keyword">new</span> MyView();

myView.on(<span class="hljs-string">"collection:closed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  alert(<span class="hljs-string">"the collection view is now closed"</span>);
});

myView.close();
</code></pre>
<h3>&quot;before:item:added&quot; / &quot;after:item:added&quot;</h3>
<p>The &quot;before:item:added&quot; event and corresponding <code>onBeforeItemAdded</code><br />method are triggered just after creating a new itemView instance for<br />an item that was added to the collection, but before the<br />view is rendered and added to the DOM.</p><p>The &quot;after:item:added&quot; event and corresponding <code>onAfterItemAdded</code><br />method are triggered after rendering the view and adding it to the<br />view&#39;s DOM element.</p><pre><code class="lang-js">cv.on(<span class="hljs-string">"before:item:added"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewInstance)</span></span>{
  <span class="hljs-comment">// ...</span>
});

cv.on(<span class="hljs-string">"after:item:added"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewInstance)</span></span>{
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<h3>&quot;item:removed&quot; / onItemRemoved</h3>
<p>Triggered after an itemView instance has been closed and<br />removed, when it&#39;s item was deleted or removed from the<br />collection.</p><pre><code class="lang-js">cv.on(<span class="hljs-string">"item:removed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(viewInstance)</span></span>{
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<h3>&quot;itemview:*&quot; event bubbling from child views</h3>
<p>When an item view within a collection view triggers an<br />event, that event will bubble up through the parent<br />collection view with &quot;itemview:&quot; prepended to the event<br />name. </p><p>That is, if a child view triggers &quot;do:something&quot;, the<br />parent collection view will then trigger &quot;itemview:do:something&quot;.</p><pre><code class="lang-js"><span class="hljs-comment">// set up basic collection</span>
<span class="hljs-keyword">var</span> myModel = <span class="hljs-keyword">new</span> MyModel();
<span class="hljs-keyword">var</span> myCollection = <span class="hljs-keyword">new</span> MyCollection();
myCollection.add(myModel);

<span class="hljs-comment">// get the collection view in place</span>
colView = <span class="hljs-keyword">new</span> CollectionView({
  collection: myCollection
});
colView.render();

<span class="hljs-comment">// bind to the collection view's events that were bubbled</span>
<span class="hljs-comment">// from the child view</span>
colView.on(<span class="hljs-string">"itemview:do:something"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(childView, msg)</span></span>{
  alert(<span class="hljs-string">"I said, '"</span> + msg + <span class="hljs-string">"'"</span>);
});

<span class="hljs-comment">// hack, to get the child view and trigger from it</span>
<span class="hljs-keyword">var</span> childView = colView.children[myModel.cid];
childView.trigger(<span class="hljs-string">"do:something"</span>, <span class="hljs-string">"do something!"</span>);
</code></pre>
<p>The result of this will be an alert box that says<br />&quot;I said, &#39;do something!&#39;&quot;. </p><p>Also note that you would not normally grab a reference to<br />the child view the way this is showing. I&#39;m merely using<br />that hack as a way to demonstrate the event bubbling.<br />Normally, you would have your item view listening to DOM<br />events or model change events, and then triggering an event<br />of it&#39;s own based on that.</p><h2>CollectionView&#39;s <code>itemViewEventPrefix</code></h2>
<p>You can customize the event prefix for events that are forwarded<br />through the collection view. To do this, set the <code>itemViewEventPrefix</code><br />on the collection view.</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> CV = Marionette.CollectionView.extend({
  itemViewEventPrefix: <span class="hljs-string">"some:prefix"</span>
});

<span class="hljs-keyword">var</span> c = <span class="hljs-keyword">new</span> CV({
  collection: myCol
});

c.on(<span class="hljs-string">"some:prefix:render"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// item view was rendered</span>
});

c.render();
</code></pre>
<p>The <code>itemViewEventPrefix</code> can be provided in the view definition or<br />in the constructor function call, to get a view instance.</p><h2>CollectionView render</h2>
<p>The <code>render</code> method of the collection view is responsible for<br />rendering the entire collection. It loops through each of the<br />items in the collection and renders them individually as an<br /><code>itemView</code>.</p><pre><code class="lang-js">MyCollectionView = Backbone.Marionette.CollectionView.extend({...});

<span class="hljs-keyword">new</span> MyCollectionView().render().done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// all of the children are now rendered. do stuff here.</span>
});
</code></pre>
<h2>CollectionView: Automatic Rendering</h2>
<p>The collection view binds to the &quot;add&quot;, &quot;remove&quot; and &quot;reset&quot; events of the<br />collection that is specified. </p><p>When the collection for the view is &quot;reset&quot;, the view will call <code>render</code> on<br />itself and re-render the entire collection.</p><p>When a model is added to the collection, the collection view will render that<br />one model in to the collection of item views.</p><p>When a model is removed from a collection (or destroyed / deleted), the collection<br />view will close and remove that model&#39;s item view.</p><h2>CollectionView: Re-render Collection</h2>
<p>If you need to re-render the entire collection, you can call the<br /><code>view.render</code> method. This method takes care of closing all of<br />the child views that may have previously been opened.</p><h2>CollectionView&#39;s appendHtml</h2>
<p>By default the collection view will call jQuery&#39;s <code>.append</code> to<br />move the HTML contents from the item view instance in to the collection<br />view&#39;s <code>el</code>. </p><p>You can override this by specifying an <code>appendHtml</code> method in your<br />view definition. This method takes three parameters and has no return<br />value.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({

    <span class="hljs-comment">// The default implementation:</span>
  appendHtml: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(collectionView, itemView, index)</span></span>{
    collectionView.$el.append(itemView.el);
  }

});
</code></pre>
<p>The first parameter is the instance of the collection view that<br />will receive the HTML from the second parameter, the current item<br />view instance. </p><p>The third parameter, <code>index</code>, is the index of the<br />model that this itemView instance represents, in the collection<br />that the model came from. This is useful for sorting a collection<br />and displaying the sorted list in the correct order on the screen.</p><h2>CollectionView&#39;s children</h2>
<p>The CollectionView uses <a href="https://github.com/marionettejs/backbone.babysitter">Backbone.BabySitter</a><br />to store and manage it&#39;s child views. This allows you to easily access<br />the views within the collection view, iterate them, find them by<br />a given indexer such as the view&#39;s model or collection, and more.</p><pre><code class="lang-js"><span class="hljs-keyword">var</span> cv = <span class="hljs-keyword">new</span> Marionette.CollectionView({
  collection: someCollection
});

cv.render();


<span class="hljs-comment">// retrieve a view by model</span>
<span class="hljs-keyword">var</span> v = cv.children.findByModel(someModel);

<span class="hljs-comment">// iterate over all of the views and process them</span>
cv.children.each(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(view)</span></span>{

  <span class="hljs-comment">// process the `view` here</span>

});
</code></pre>
<p>For more information on the available features and functionality of<br />the <code>.children</code>, see the <a href="https://github.com/marionettejs/backbone.babysitter">Backbone.BabySitter documentation</a>.</p><h2>CollectionView close</h2>
<p>CollectionView implements a <code>close</code> method, which is called by the<br />region managers automatically. As part of the implementation, the<br />following are performed:</p><ul>
<li>unbind all <code>listenTo</code> events</li>
<li>unbind all custom view events</li>
<li>unbind all DOM events</li>
<li>unbind all item views that were rendered</li>
<li>remove <code>this.el</code> from the DOM</li>
<li>call an <code>onClose</code> event on the view, if one is provided</li>
</ul>
<p>By providing an <code>onClose</code> event in your view definition, you can<br />run custom code for your view that is fired after your view has been<br />closed and cleaned up. This lets you handle any additional clean up<br />code without having to override the <code>close</code> method.</p><pre><code class="lang-js">Backbone.Marionette.CollectionView.extend({
  onClose: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
    <span class="hljs-comment">// custom cleanup or closing code, here</span>
  }
});
</code></pre>

      </div>
    </div>
  </body>
  <script src="../../js/docs.js" type="text/javascript"></script>
</html>
